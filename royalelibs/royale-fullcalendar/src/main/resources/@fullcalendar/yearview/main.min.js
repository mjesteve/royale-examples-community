/*!
FullCalendar Year View Plugin v4.3.0
Docs & License: https://fullcalendar.io/
(c) 2019 Adam Shaw
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@fullcalendar/core"),require("moment")):"function"==typeof define&&define.amd?define(["exports","@fullcalendar/core","moment"],t):t((e=e||self).FullCalendarYearView={},e.FullCalendar,e.moment)}(this,(function(e,t,r){"use strict";var i="default"in r?r.default:r,n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function s(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.buildRenderRange=function(t,r,i){var n=e.prototype.buildRenderRange.call(this,t,r,i);return{start:n.start,end:n.end}},t}(t.DateProfileGenerator),a=function(){function e(e){var t=this;this.isHidden=!0,this.margin=10,this.documentMousedown=function(e){t.el&&!t.el.contains(e.target)&&t.hide()},this.options=e}return e.prototype.show=function(){this.isHidden&&(this.el||this.render(),this.el.style.display="",this.position(),this.isHidden=!1,this.trigger("show"))},e.prototype.hide=function(){this.isHidden||(this.el.style.display="none",this.isHidden=!0,this.trigger("hide"))},e.prototype.render=function(){var e=this,r=this.options,i=this.el=t.createElement("div",{className:"fc-popover "+(r.className||""),style:{top:"0",left:"0"}});"function"==typeof r.content&&r.content(i),r.parentEl.appendChild(i),t.listenBySelector(i,"click",".fc-close",(function(t){e.hide()})),r.autoHide&&document.addEventListener("mousedown",this.documentMousedown)},e.prototype.destroy=function(){this.hide(),this.el&&(t.removeElement(this.el),this.el=null),document.removeEventListener("mousedown",this.documentMousedown)},e.prototype.position=function(){var e,r,i=this.options,n=this.el,s=n.getBoundingClientRect(),o=t.computeRect(n.offsetParent),l=t.computeClippingRect(i.parentEl);e=i.top||0,r=void 0!==i.left?i.left:void 0!==i.right?i.right-s.width:0,e=Math.min(e,l.bottom-s.height-this.margin),e=Math.max(e,l.top+this.margin),r=Math.min(r,l.right-s.width-this.margin),r=Math.max(r,l.left+this.margin),t.applyStyle(n,{top:e-o.top,left:r-o.left})},e.prototype.trigger=function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))},e}(),d=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return s(r,e),r.prototype.renderSegHtml=function(e,r){var i,n,s=this.context,o=s.view,l=s.options,a=e.eventRange,d=a.def,c=a.ui,h=d.allDay,p=o.computeEventDraggable(d,c),u=h&&e.isStart&&o.computeEventStartResizable(d,c),f=h&&e.isEnd&&o.computeEventEndResizable(d,c),g=this.getSegClasses(e,p,u||f,r),m=t.cssToStr(this.getSkinCss(c)),v="";return g.unshift("fc-day-grid-event","fc-h-event"),e.isStart&&(i=this.getTimeText(a))&&(v='<span class="fc-time">'+t.htmlEscape(i)+"</span>"),n='<span class="fc-title">'+(t.htmlEscape(d.title||"")||"&nbsp;")+"</span>",'<a class="'+g.join(" ")+'"'+(d.url?' href="'+t.htmlEscape(d.url)+'"':"")+(m?' style="'+m+'"':"")+'><div class="fc-content">'+("rtl"===l.dir?n+" "+v:v+" "+n)+"</div>"+(u?'<div class="fc-resizer fc-start-resizer"></div>':"")+(f?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},r.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"}},r.prototype.computeDisplayEventEnd=function(){return!1},r}(t.FgEventRenderer),c=function(e){function r(t){var r=e.call(this,t.context)||this;return r.dayGrid=t,r}return s(r,e),r.prototype.attachSegs=function(e,t){var r=this.rowStructs=this.renderSegRows(e);this.dayGrid.rowEls.forEach((function(e,t){e.querySelector(".fc-content-skeleton > table").appendChild(r[t].tbodyEl)})),t||this.dayGrid.removeSegPopover()},r.prototype.detachSegs=function(){for(var e,r=this.rowStructs||[];e=r.pop();)t.removeElement(e.tbodyEl);this.rowStructs=null},r.prototype.renderSegRows=function(e){var t,r,i=[];for(t=this.groupSegRows(e),r=0;r<t.length;r++)i.push(this.renderSegRow(r,t[r]));return i},r.prototype.renderSegRow=function(e,r){var i,n,s,o,l,a,d,c=this.dayGrid,h=c.colCnt,p=c.isRtl,u=this.buildSegLevels(r),f=Math.max(1,u.length),g=document.createElement("tbody"),m=[],v=[],y=[];function b(e){for(;s<e;)(d=(y[i-1]||[])[s])?d.rowSpan=(d.rowSpan||1)+1:(d=document.createElement("td"),o.appendChild(d)),v[i][s]=d,y[i][s]=d,s++}for(i=0;i<f;i++){if(n=u[i],s=0,o=document.createElement("tr"),m.push([]),v.push([]),y.push([]),n)for(l=0;l<n.length;l++){a=n[l];var w=p?h-1-a.lastCol:a.firstCol,S=p?h-1-a.firstCol:a.lastCol;for(b(w),d=t.createElement("td",{className:"fc-event-container"},a.el),w!==S?d.colSpan=S-w:y[i][s]=d;s<=S;)v[i][s]=d,m[i][s]=a,s++;o.appendChild(d)}b(h);var C=c.renderProps.renderIntroHtml();C&&(c.isRtl?t.appendToElement(o,C):t.prependToElement(o,C)),g.appendChild(o)}return{row:e,tbodyEl:g,cellMatrix:v,segMatrix:m,segLevels:u,segs:r}},r.prototype.buildSegLevels=function(e){var t,r,i,n=this.dayGrid,s=n.isRtl,o=n.colCnt,l=[];for(e=this.sortEventSegs(e),t=0;t<e.length;t++){for(r=e[t],i=0;i<l.length&&h(r,l[i]);i++);r.level=i,r.leftCol=s?o-1-r.lastCol:r.firstCol,r.rightCol=s?o-1-r.firstCol:r.lastCol,(l[i]||(l[i]=[])).push(r)}for(i=0;i<l.length;i++)l[i].sort(p);return l},r.prototype.groupSegRows=function(e){var t,r=[];for(t=0;t<this.dayGrid.rowCnt;t++)r.push([]);for(t=0;t<e.length;t++)r[e[t].row].push(e[t]);return r},r.prototype.computeDisplayEventEnd=function(){return 1===this.dayGrid.colCnt},r}(d);function h(e,t){var r,i;for(r=0;r<t.length;r++)if((i=t[r]).firstCol<=e.lastCol&&i.lastCol>=e.firstCol)return!0;return!1}function p(e,t){return e.leftCol-t.leftCol}var u=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return s(r,e),r.prototype.attachSegs=function(e,r){var i=r.sourceSeg,n=this.rowStructs=this.renderSegRows(e);this.dayGrid.rowEls.forEach((function(e,r){var s,o,l=t.htmlToElement('<div class="fc-mirror-skeleton"><table></table></div>');i&&i.row===r?s=i.el:(s=e.querySelector(".fc-content-skeleton tbody"))||(s=e.querySelector(".fc-content-skeleton table")),o=s.getBoundingClientRect().top-e.getBoundingClientRect().top,l.style.top=o+"px",l.querySelector("table").appendChild(n[r].tbodyEl),e.appendChild(l)}))},r}(c),f='<td style="pointer-events:none"></td>',g=function(e){function r(t){var r=e.call(this,t.context)||this;return r.fillSegTag="td",r.dayGrid=t,r}return s(r,e),r.prototype.renderSegs=function(t,r){"bgEvent"===t&&(r=r.filter((function(e){return e.eventRange.def.allDay}))),e.prototype.renderSegs.call(this,t,r)},r.prototype.attachSegs=function(e,t){var r,i,n,s=[];for(r=0;r<t.length;r++)i=t[r],n=this.renderFillRow(e,i),this.dayGrid.rowEls[i.row].appendChild(n),s.push(n);return s},r.prototype.renderFillRow=function(e,r){var n=this.dayGrid,s=n.colCnt,o=n.isRtl,l=o?s-1-r.lastCol:r.firstCol,a=o?s-1-r.firstCol:r.lastCol;if(!o){var d=n.calendar.state.currentDate.getFullYear();a=Math.min(a,i(new Date(d,r.row,1)).daysInMonth()-1)}var c,h,p,u=l,g=a;c="businessHours"===e?"bgevent":e.toLowerCase(),p=(h=t.htmlToElement('<div class="fc-'+c+'-skeleton"><table><tr></tr></table></div>')).getElementsByTagName("tr")[0],u>0&&t.appendToElement(p,new Array(u+1).join(f)),r.el.colSpan=g-u+1,p.appendChild(r.el),g<s-1&&t.appendToElement(p,new Array(s-g).join(f));var m=n.renderProps.renderIntroHtml();return m&&(n.isRtl?t.appendToElement(p,m):t.prependToElement(p,m)),h},r}(t.FillRenderer),m=function(e){function r(r,i){var n=e.call(this,r,i)||this,s=n.eventRenderer=new v(n),o=n.renderFrame=t.memoizeRendering(n._renderFrame);return n.renderFgEvents=t.memoizeRendering(s.renderSegs.bind(s),s.unrender.bind(s),[o]),n.renderEventSelection=t.memoizeRendering(s.selectByInstanceId.bind(s),s.unselectByInstanceId.bind(s),[n.renderFgEvents]),n.renderEventDrag=t.memoizeRendering(s.hideByHash.bind(s),s.showByHash.bind(s),[o]),n.renderEventResize=t.memoizeRendering(s.hideByHash.bind(s),s.showByHash.bind(s),[o]),r.calendar.registerInteractiveComponent(n,{el:n.el,useEventCenter:!1}),n}return s(r,e),r.prototype.render=function(e){this.renderFrame(e.date),this.renderFgEvents(e.fgSegs),this.renderEventSelection(e.eventSelection),this.renderEventDrag(e.eventDragInstances),this.renderEventResize(e.eventResizeInstances)},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.renderFrame.unrender(),this.calendar.unregisterInteractiveComponent(this)},r.prototype._renderFrame=function(e){var r=this.theme,i=this.dateEnv.format(e,t.createFormatter(this.opt("dayPopoverFormat")));this.el.innerHTML='<div class="fc-header '+r.getClass("popoverHeader")+'"><span class="fc-title">'+t.htmlEscape(i)+'</span><span class="fc-close '+r.getIconClass("close")+'"></span></div><div class="fc-body '+r.getClass("popoverContent")+'"><div class="fc-event-container"></div></div>',this.segContainerEl=this.el.querySelector(".fc-event-container")},r.prototype.queryHit=function(e,r,i,n){var s=this.props.date;if(e<i&&r<n)return{component:this,dateSpan:{allDay:!0,range:{start:s,end:t.addDays(s,1)}},dayEl:this.el,rect:{left:0,top:0,right:i,bottom:n},layer:1}},r}(t.DateComponent),v=function(e){function r(t){var r=e.call(this,t.context)||this;return r.dayTile=t,r}return s(r,e),r.prototype.attachSegs=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];this.dayTile.segContainerEl.appendChild(i.el)}},r.prototype.detachSegs=function(e){for(var r=0,i=e;r<i.length;r++){var n=i[r];t.removeElement(n.el)}},r}(d),y=function(){function e(e){this.context=e}return e.prototype.renderHtml=function(e){var t=[];e.renderIntroHtml&&t.push(e.renderIntroHtml());for(var r=0,i=e.cells;r<i.length;r++){var n=i[r];t.push(b(n.date,e.dateProfile,this.context,n.htmlAttrs))}return e.cells.length||t.push('<td class="fc-day '+this.context.theme.getClass("widgetContent")+'"></td>'),"rtl"===this.context.options.dir&&t.reverse(),"<tr>"+t.join("")+"</tr>"},e}();function b(e,r,i,n){var s=i.dateEnv,o=i.theme,l=t.rangeContainsMarker(r.activeRange,e),a=t.getDayClasses(e,r,i);return a.unshift("fc-day",o.getClass("widgetContent")),'<td class="'+a.join(" ")+'"'+(l?' data-date="'+s.formatIso(e,{omitTime:!0})+'"':"")+(n?" "+n:"")+"></td>"}var w=t.createFormatter({day:"numeric"}),S=t.createFormatter({week:"numeric"}),C=function(e){function r(r,i,n){var s=e.call(this,r,i)||this;s.bottomCoordPadding=0,s.isCellSizesDirty=!1;var o=s.eventRenderer=new c(s),l=s.fillRenderer=new g(s);s.mirrorRenderer=new u(s);var a=s.renderCells=t.memoizeRendering(s._renderCells,s._unrenderCells);return s.renderBusinessHours=t.memoizeRendering(l.renderSegs.bind(l,"businessHours"),l.unrender.bind(l,"businessHours"),[a]),s.renderDateSelection=t.memoizeRendering(l.renderSegs.bind(l,"highlight"),l.unrender.bind(l,"highlight"),[a]),s.renderBgEvents=t.memoizeRendering(l.renderSegs.bind(l,"bgEvent"),l.unrender.bind(l,"bgEvent"),[a]),s.renderFgEvents=t.memoizeRendering(o.renderSegs.bind(o),o.unrender.bind(o),[a]),s.renderEventSelection=t.memoizeRendering(o.selectByInstanceId.bind(o),o.unselectByInstanceId.bind(o),[s.renderFgEvents]),s.renderEventDrag=t.memoizeRendering(s._renderEventDrag,s._unrenderEventDrag,[a]),s.renderEventResize=t.memoizeRendering(s._renderEventResize,s._unrenderEventResize,[a]),s.renderProps=n,s}return s(r,e),r.prototype.render=function(e){var t=e.cells;this.rowCnt=t.length,this.colCnt=t[0].length,this.renderCells(t,e.isRigid),this.renderBusinessHours(e.businessHourSegs),this.renderDateSelection(e.dateSelectionSegs),this.renderBgEvents(e.bgEventSegs),this.renderFgEvents(e.fgEventSegs),this.renderEventSelection(e.eventSelection),this.renderEventDrag(e.eventDrag),this.renderEventResize(e.eventResize),this.segPopoverTile&&this.updateSegPopoverTile()},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.renderCells.unrender()},r.prototype.getCellRange=function(e,r){var i=this.props.cells[e][r].date;return{start:i,end:t.addDays(i,1)}},r.prototype.updateSegPopoverTile=function(e,t){var r=this.props;this.segPopoverTile.receiveProps({date:e||this.segPopoverTile.props.date,fgSegs:t||this.segPopoverTile.props.fgSegs,eventSelection:r.eventSelection,eventDragInstances:r.eventDrag?r.eventDrag.affectedInstances:null,eventResizeInstances:r.eventResize?r.eventResize.affectedInstances:null})},r.prototype._renderCells=function(e,r){var i,n,s=this.view,o=this.dateEnv,l=this.rowCnt,a=this.colCnt,d="";for(i=0;i<l;i++)d+=this.renderDayRowHtml(i,r);for(this.el.innerHTML=d,this.rowEls=t.findElements(this.el,".fc-row"),this.cellEls=t.findElements(this.el,".fc-day, .fc-disabled-day"),this.isRtl&&this.cellEls.reverse(),this.rowPositions=new t.PositionCache(this.el,this.rowEls,!1,!0),this.colPositions=new t.PositionCache(this.el,this.cellEls.slice(0,a),!0,!1),i=0;i<l;i++)for(n=0;n<a&&void 0!==e[i][n];n++)null!=e[i][n].date&&this.publiclyTrigger("dayRender",[{date:o.toDate(e[i][n].date),el:this.getCellEl(i,n),view:s}]);this.isCellSizesDirty=!0},r.prototype._unrenderCells=function(){this.removeSegPopover()},r.prototype.renderDayRowHtml=function(e,t){var r=this.theme,n=["fc-row","fc-week",r.getClass("dayRow")];t&&n.push("fc-rigid");var s=new y(this.context);return'<div class="'+n.join(" ")+'"><div class="fc-row-monthname fc-content"><span>'+i(this.props.cells[e][0].date).format("MMM")+'</span></div><div class="fc-bg"><table class="'+r.getClass("tableGrid")+'">'+s.renderHtml({cells:this.props.cells[e],dateProfile:this.props.dateProfile,renderIntroHtml:this.renderProps.renderBgIntroHtml})+'</table></div><div class="fc-content-skeleton"><table>'+(this.getIsNumbersVisible()?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table></div></div>"},r.prototype.getIsNumbersVisible=function(){return this.getIsDayNumbersVisible()||this.renderProps.cellWeekNumbersVisible||this.renderProps.colWeekNumbersVisible},r.prototype.getIsDayNumbersVisible=function(){return this.rowCnt>1},r.prototype.renderNumberTrHtml=function(e){var t=this.renderProps.renderNumberIntroHtml(e,this);return"<tr>"+(this.isRtl?"":t)+this.renderNumberCellsHtml(e)+(this.isRtl?t:"")+"</tr>"},r.prototype.renderNumberCellsHtml=function(e){var t,r,i=[];for(t=0;t<this.colCnt;t++)r=this.props.cells[e][t].date,i.push(this.renderNumberCellHtml(r));return this.isRtl&&i.reverse(),i.join("")},r.prototype.renderNumberCellHtml=function(e){if(null===e)return"<td></td>";var r,n,s=this.view,o=this.dateEnv,l="",a=t.rangeContainsMarker(this.props.dateProfile.activeRange,e),d=this.getIsDayNumbersVisible()&&a;return d||this.renderProps.cellWeekNumbersVisible?((r=t.getDayClasses(e,this.props.dateProfile,this.context)).unshift("fc-day-top"),this.renderProps.cellWeekNumbersVisible&&(n=o.weekDow),l+='<td class="'+r.join(" ")+'"'+(a?' data-date="'+o.formatIso(e,{omitTime:!0})+'"':"")+">",this.renderProps.cellWeekNumbersVisible&&e.getUTCDay()===n&&(l+=t.buildGotoAnchorHtml(s,{date:e,type:"week"},{class:"fc-week-number"},o.format(e,S))),d&&(l+=t.buildGotoAnchorHtml(s,e,{class:"fc-day-number"},'<span class="fc-day-number-weekday">'+i(e).format("dd")+"</span>"+o.format(e,w))),l+="</td>"):"<td></td>"},r.prototype.updateSize=function(e){var t=this,r=t.fillRenderer,i=t.eventRenderer,n=t.mirrorRenderer;(e||this.isCellSizesDirty||this.view.calendar.isEventsUpdated)&&(this.buildPositionCaches(),this.isCellSizesDirty=!1),r.computeSizes(e),i.computeSizes(e),n.computeSizes(e),r.assignSizes(e),i.assignSizes(e),n.assignSizes(e)},r.prototype.buildPositionCaches=function(){this.buildColPositions(),this.buildRowPositions()},r.prototype.buildColPositions=function(){this.colPositions.build()},r.prototype.buildRowPositions=function(){this.rowPositions.build(),this.rowPositions.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},r.prototype.positionToHit=function(e,t){var r=this.colPositions,i=this.rowPositions,n=r.leftToIndex(e),s=i.topToIndex(t);if(null!=s&&null!=n&&null!==this.props.cells[s][n].date)return{row:s,col:n,dateSpan:{range:this.getCellRange(s,n),allDay:!0},dayEl:this.getCellEl(s,n),relativeRect:{left:r.lefts[n],right:r.rights[n],top:i.tops[s],bottom:i.bottoms[s]}}},r.prototype.getCellEl=function(e,t){return this.cellEls[e*this.colCnt+t]},r.prototype._renderEventDrag=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),this.fillRenderer.renderSegs("highlight",e.segs))},r.prototype._unrenderEventDrag=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.fillRenderer.unrender("highlight"))},r.prototype._renderEventResize=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),this.fillRenderer.renderSegs("highlight",e.segs),this.mirrorRenderer.renderSegs(e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},r.prototype._unrenderEventResize=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.fillRenderer.unrender("highlight"),this.mirrorRenderer.unrender(e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},r.prototype.removeSegPopover=function(){this.segPopover&&this.segPopover.hide()},r.prototype.limitRows=function(e){var t,r,i=this.eventRenderer.rowStructs||[];for(t=0;t<i.length;t++)this.unlimitRow(t),!1!==(r=!!e&&("number"==typeof e?e:this.computeRowLevelLimit(t)))&&this.limitRow(t,r)},r.prototype.computeRowLevelLimit=function(e){var r,i,n=this.rowEls[e].getBoundingClientRect().bottom,s=t.findChildren(this.eventRenderer.rowStructs[e].tbodyEl);for(r=0;r<s.length;r++)if((i=s[r]).classList.remove("fc-limited"),i.getBoundingClientRect().bottom>n)return r;return!1},r.prototype.limitRow=function(e,r){var i,n,s,o,l,a,d,c,h,p,u,f,g,m,v,y=this,b=this.colCnt,w=this.isRtl,S=this.eventRenderer.rowStructs[e],C=[],E=0,R=function(i){for(;E<i;)(a=y.getCellSegs(e,E,r)).length&&(h=n[r-1][E],v=y.renderMoreLink(e,E,a),m=t.createElement("div",null,v),h.appendChild(m),C.push(m)),E++};if(r&&r<S.segLevels.length){for(i=S.segLevels[r-1],n=S.cellMatrix,(s=t.findChildren(S.tbodyEl).slice(r)).forEach((function(e){e.classList.add("fc-limited")})),o=0;o<i.length;o++){l=i[o];var D=w?b-1-l.lastCol:l.firstCol,H=w?b-1-l.firstCol:l.lastCol;for(R(D),c=[],d=0;E<=H;)a=this.getCellSegs(e,E,r),c.push(a),d+=a.length,E++;if(d){for(p=(h=n[r-1][D]).rowSpan||1,u=[],f=0;f<c.length;f++)g=t.createElement("td",{className:"fc-more-cell",rowSpan:p}),a=c[f],v=this.renderMoreLink(e,D+f,[l].concat(a)),m=t.createElement("div",null,v),g.appendChild(m),u.push(g),C.push(g);h.classList.add("fc-limited"),t.insertAfterElement(h,u),s.push(h)}}R(this.colCnt),S.moreEls=C,S.limitedEls=s}},r.prototype.unlimitRow=function(e){var r=this.eventRenderer.rowStructs[e];r.moreEls&&(r.moreEls.forEach(t.removeElement),r.moreEls=null),r.limitedEls&&(r.limitedEls.forEach((function(e){e.classList.remove("fc-limited")})),r.limitedEls=null)},r.prototype.renderMoreLink=function(e,r,i){var n=this,s=this.view,o=this.dateEnv,l=t.createElement("a",{className:"fc-more"});return l.innerText=this.getMoreLinkText(i.length),l.addEventListener("click",(function(t){var l=n.opt("eventLimitClick"),a=n.isRtl?n.colCnt-r-1:r,d=n.props.cells[e][a].date,c=t.currentTarget,h=n.getCellEl(e,r),p=n.getCellSegs(e,r),u=n.resliceDaySegs(p,d),f=n.resliceDaySegs(i,d);"function"==typeof l&&(l=n.publiclyTrigger("eventLimitClick",[{date:o.toDate(d),allDay:!0,dayEl:h,moreEl:c,segs:u,hiddenSegs:f,jsEvent:t,view:s}])),"popover"===l?n.showSegPopover(e,r,c,u):"string"==typeof l&&s.calendar.zoomTo(d,l)})),l},r.prototype.showSegPopover=function(e,r,i,n){var s,o,l=this,d=this,c=d.calendar,h=d.view,p=d.theme,u=this.isRtl?this.colCnt-r-1:r,f=i.parentNode;s=1===this.rowCnt?h.el:this.rowEls[e],o={className:"fc-more-popover "+p.getClass("popover"),parentEl:h.el,top:t.computeRect(s).top,autoHide:!0,content:function(t){l.segPopoverTile=new m(l.context,t),l.updateSegPopoverTile(l.props.cells[e][u].date,n)},hide:function(){l.segPopoverTile.destroy(),l.segPopoverTile=null,l.segPopover.destroy(),l.segPopover=null}},this.isRtl?o.right=t.computeRect(f).right+1:o.left=t.computeRect(f).left-1,this.segPopover=new a(o),this.segPopover.show(),c.releaseAfterSizingTriggers()},r.prototype.resliceDaySegs=function(e,r){for(var i=r,n={start:i,end:t.addDays(i,1)},s=[],l=0,a=e;l<a.length;l++){var d=a[l],c=d.eventRange,h=c.range,p=t.intersectRanges(h,n);p&&s.push(o({},d,{eventRange:{def:c.def,ui:o({},c.ui,{durationEditable:!1}),instance:c.instance,range:p},isStart:d.isStart&&p.start.valueOf()===h.start.valueOf(),isEnd:d.isEnd&&p.end.valueOf()===h.end.valueOf()}))}return s},r.prototype.getMoreLinkText=function(e){var t=this.opt("eventLimitText");return"function"==typeof t?t(e):"+"+e+" "+t},r.prototype.getCellSegs=function(e,t,r){for(var i,n=this.eventRenderer.rowStructs[e].segMatrix,s=r||0,o=[];s<n.length;)(i=n[s][t])&&o.push(i),s++;return o},r}(t.DateComponent),E=t.createFormatter({week:"numeric"}),R=function(e){function r(r,i,n,s){var o=e.call(this,r,i,n,s)||this;o.renderHeadIntroHtml=function(){var e=o.theme;return o.colWeekNumbersVisible?'<th class="fc-week-number '+e.getClass("widgetHeader")+'" '+o.weekNumberStyleAttr()+"><span>"+t.htmlEscape(o.opt("weekLabel"))+"</span></th>":""},o.renderDayGridNumberIntroHtml=function(e,r){var i=o.dateEnv,n=r.props.cells[e][0].date;return o.colWeekNumbersVisible?'<td class="fc-week-number" '+o.weekNumberStyleAttr()+">"+t.buildGotoAnchorHtml(o,{date:n,type:"week",forceOff:1===r.colCnt},i.format(n,E))+"</td>":""},o.renderDayGridBgIntroHtml=function(){var e=o.theme;return o.colWeekNumbersVisible?'<td class="fc-week-number '+e.getClass("widgetContent")+'" '+o.weekNumberStyleAttr()+"></td>":""},o.renderDayGridIntroHtml=function(){return o.colWeekNumbersVisible?'<td class="fc-week-number" '+o.weekNumberStyleAttr()+"></td>":""},o.el.classList.add("fc-dayGrid-view"),o.el.innerHTML=o.renderSkeletonHtml(),o.scroller=new t.ScrollComponent("hidden","auto");var l=o.scroller.el;o.el.querySelector(".fc-body > tr > td").appendChild(l),l.classList.add("fc-day-grid-container"),l.classList.add("fc-year-container");var a,d=t.createElement("div",{className:"fc-day-grid"});return l.appendChild(d),o.opt("weekNumbers")?o.opt("weekNumbersWithinDays")?(a=!0,o.colWeekNumbersVisible=!1):(a=!1,o.colWeekNumbersVisible=!0):(o.colWeekNumbersVisible=!1,a=!1),o.dayGrid=new C(o.context,d,{renderNumberIntroHtml:o.renderDayGridNumberIntroHtml,renderBgIntroHtml:o.renderDayGridBgIntroHtml,renderIntroHtml:o.renderDayGridIntroHtml,colWeekNumbersVisible:o.colWeekNumbersVisible,cellWeekNumbersVisible:a}),o}return s(r,e),r.prototype.destroy=function(){e.prototype.destroy.call(this),this.dayGrid.destroy(),this.scroller.destroy()},r.prototype.renderSkeletonHtml=function(){var e=this.theme;return'<table class="'+e.getClass("tableGrid")+'">'+(this.opt("columnHeader")?'<thead class="fc-head"><tr><td class="fc-head-container '+e.getClass("widgetHeader")+'">&nbsp;</td></tr></thead>':"")+'<tbody class="fc-body"><tr><td class="'+e.getClass("widgetContent")+'"></td></tr></tbody></table>'},r.prototype.weekNumberStyleAttr=function(){return null!=this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},r.prototype.hasRigidRows=function(){var e=this.opt("eventLimit");return e&&"number"!=typeof e},r.prototype.updateSize=function(t,r,i){e.prototype.updateSize.call(this,t,r,i),this.dayGrid.updateSize(t)},r.prototype.updateBaseSize=function(e,r,i){var n,s,o=this.dayGrid,l=this.opt("eventLimit"),a=this.header?this.header.el:null;o.rowEls?(this.colWeekNumbersVisible&&(this.weekNumberWidth=t.matchCellWidths(t.findElements(this.el,".fc-week-number"))),this.scroller.clear(),a&&t.uncompensateScroll(a),o.removeSegPopover(),l&&"number"==typeof l&&o.limitRows(l),n=this.computeScrollerHeight(r),this.setGridHeight(n,i),l&&"number"!=typeof l&&o.limitRows(l),i||(this.scroller.setHeight(n),((s=this.scroller.getScrollbarWidths()).left||s.right)&&(a&&t.compensateScroll(a,s),n=this.computeScrollerHeight(r),this.scroller.setHeight(n)),this.scroller.lockOverflow(s))):i||(n=this.computeScrollerHeight(r),this.scroller.setHeight(n))},r.prototype.computeScrollerHeight=function(e){return e-t.subtractInnerElHeight(this.el,this.scroller.el)},r.prototype.setGridHeight=function(e,r){this.opt("monthMode")?(r&&(e*=this.dayGrid.rowCnt/6),t.distributeHeight(this.dayGrid.rowEls,e,!r)):r?t.undistributeHeight(this.dayGrid.rowEls):t.distributeHeight(this.dayGrid.rowEls,e,!0)},r.prototype.computeDateScroll=function(e){return{top:0}},r.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},r.prototype.applyDateScroll=function(e){void 0!==e.top&&this.scroller.setScrollTop(e.top)},r}(t.View);R.prototype.dateProfileGeneratorClass=l;var D=function(e){function t(t,r){var i=e.call(this,t,r.el)||this;return i.slicer=new H,i.dayGrid=r,t.calendar.registerInteractiveComponent(i,{el:i.dayGrid.el}),i}return s(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.calendar.unregisterInteractiveComponent(this)},t.prototype.render=function(e){var t=this.dayGrid,r=e.dateProfile,i=e.dayTable;t.receiveProps(o({},this.slicer.sliceProps(e,r,e.nextDayThreshold,t,i),{dateProfile:r,cells:i.cells,isRigid:e.isRigid}))},t.prototype.buildPositionCaches=function(){this.dayGrid.buildPositionCaches()},t.prototype.queryHit=function(e,t){var r=this.dayGrid.positionToHit(e,t);if(r)return{component:this.dayGrid,dateSpan:r.dateSpan,dayEl:r.dayEl,rect:{left:r.relativeRect.left,right:r.relativeRect.right,top:r.relativeRect.top,bottom:r.relativeRect.bottom},layer:0}},t}(t.DateComponent),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.sliceRange=function(e,t){return t.sliceRange(e)},t}(t.Slicer),P=function(){function e(e,t){this.rowCnt=12,this.colCnt=31,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}return e.prototype.buildCells=function(){for(var e,t=[],r=[],i=[],n=0,s=0;s<this.daySeries.dates.length;s++)if(r.push({date:this.daySeries.dates[s]}),this.daySeries.dates.length===s+1||1===this.daySeries.dates[s+1].getDate()){e={idxini:-1,idxfin:-1};for(var o=this.daySeries.dates[s].getDate();o<31;o++)r.push({date:null}),-1===e.idxini?(e.idxini=n+s+1,e.idxfin=n+s+1):e.idxfin=e.idxfin+1,n++;-1!==e.idxini&&i.push(e),t.push(r),r=[]}return this.invalidIndex=i,t},e.prototype.buildHeaderDates=function(){return[]},e.prototype.sliceRange=function(e){var t=this.colCnt,r=this.daySeries.sliceRange(e),i=[];if(r){for(var n=r.firstIndex,s=r.lastIndex,o=0;o<this.invalidIndex.length;o++)if(-1!==this.invalidIndex[o].idxini){var l=0;if(n>=this.invalidIndex[o].idxini)n+=l=n>=this.invalidIndex[o].idxfin?this.invalidIndex[o].idxfin-this.invalidIndex[o].idxini+1:n-this.invalidIndex[o].idxini+1,s+=l;else{if(!(s>=this.invalidIndex[o].idxini))break;s+=l=s>=this.invalidIndex[o].idxfin?this.invalidIndex[o].idxfin-this.invalidIndex[o].idxini+1:n-this.invalidIndex[o].idxini+1}}for(var a=n;a<=s;){var d=Math.floor(a/t),c=Math.min((d+1)*t,s+1);i.push({row:d,firstCol:a%t,lastCol:(c-1)%t,isStart:r.isStart&&a===n,isEnd:r.isEnd&&c-1===s}),a=c}}return i},e}(),x=function(e){function i(i,n,s,o){var l=e.call(this,i,n,s,o)||this;return l.buildDayTable=t.memoize(I),r.locale(l.context.dateEnv.locale.codeArg.toString()),l.opt("columnHeader")&&(l.header=new t.DayHeader(l.context,l.el.querySelector(".fc-head-container"))),l.simpleDayGrid=new D(l.context,l.dayGrid),l}return s(i,e),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.header&&this.header.destroy(),this.simpleDayGrid.destroy()},i.prototype.render=function(t){e.prototype.render.call(this,t);var r=this.props.dateProfile,i=this.dayTable=this.buildDayTable(r,this.dateProfileGenerator);this.header&&this.header.receiveProps({dateProfile:r,dates:i.headerDates,datesRepDistinctDays:1===i.rowCnt,renderIntroHtml:this.renderHeadIntroHtml}),this.simpleDayGrid.receiveProps({dateProfile:r,dayTable:i,businessHours:t.businessHours,dateSelection:t.dateSelection,eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isRigid:this.hasRigidRows(),nextDayThreshold:this.nextDayThreshold})},i}(R);function I(e,r){var i=new t.DaySeries(e.renderRange,r);return new P(i,/year|month|week/.test(e.currentRangeUnit))}var k=t.createPlugin({defaultView:"year",views:{yearGrid:x,year:{type:"yearGrid",duration:{years:1}}}});e.AbstractDayGridView=R,e.DayBgRow=y,e.DayGrid=C,e.DayGridSlicer=H,e.DayGridView=x,e.DayTable=P,e.SimpleDayGrid=D,e.buildBasicDayTable=I,e.default=k,Object.defineProperty(e,"__esModule",{value:!0})}));