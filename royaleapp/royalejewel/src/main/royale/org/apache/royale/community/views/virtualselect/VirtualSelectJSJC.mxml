<?xml version="1.0" encoding="utf-8"?>
<j:Card xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:j="library://ns.apache.org/royale/jewel"
    xmlns:js="library://ns.apache.org/royale/basic"    
    xmlns:jc="library://ns.apache.org/royale/community"
    xmlns:html="library://ns.apache.org/royale/html"
    xmlns:vsel="library://ns.apache.org/royale/externsjs/virtualselect"> 

    <fx:Metadata>
        [Event(name="resfreshData", type="org.apache.royale.events.Event")]
    </fx:Metadata>
    
    <fx:Script>
        <![CDATA[
        import org.apache.royale.events.Event;
        import org.apache.royale.collections.ArrayList;
        import org.apache.royale.externsjs.virtualselect.controls.VirtualMultiSelectRoyale;
        import org.apache.royale.externsjs.virtualselect.controls.VirtualMultiSelectListRoyale;

        [Bindable]
        private var arStringBig:Array = new Array();
        [Bindable]
        public var dpClassBig:ArrayList = new ArrayList();

        private var _arClassBig:Array = new Array();
        public function get arClassBig():Array{ return _arClassBig; }
        [Bindable]
        public function set arClassBig(value:Array):void
        { 
            _arClassBig = value; 
            dpClassBig = new ArrayList(value);
        }
        [Bindable]
        public var arHClassBig:Array = new Array();
        [Bindable]
        public var localSelectedValue:String;

        private function refreshData():void
        {
            dispatchEvent(new Event("resfreshData"));
        }

        private function onChangeVS(event:Event):void
        {
            localSelectedValue = "";
            if( event.target is VirtualMultiSelectListRoyale || event.target is VirtualMultiSelectRoyale )
            {
                localSelectedValue = event.target.selectedIndices ? event.target.selectedIndices.join(' - '):'[-1]';
            }
            else
                localSelectedValue = event.target.selectedLabel;
        }

        ]]>
    </fx:Script>

    <j:beads>
        <js:ContainerDataBinding/>
    </j:beads>

    <j:CardHeader gap="5">
        <j:VGroup gap="5" percentWidth="50">
            <j:CardTitle text="Simple dataProvider" className="primary-normal" percentWidth="100"/>            
            <html:H5 text="Royale Wrapper"  className="primary-dark"/>
        </j:VGroup>
        <j:VGroup gap="5" percentWidth="50" itemsHorizontalAlign="itemsRight">
            <j:CardTitle text="Hierarchical dataProvider" className="primary-normal" percentWidth="100"/>
            <j:IconButton emphasis="primary" unboxed="true" style="margin-top: 0;" click="refreshData()">
                <j:beads>
                    <j:ToolTip toolTip="Refresh Data"/>
                </j:beads>
                <j:icon>
                    <js:MaterialIcon text="{MaterialIconType.REFRESH}" />
                </j:icon>
            </j:IconButton>
        </j:VGroup>
    </j:CardHeader>

    <j:CardPrimaryContent>

        <j:VGroup percentWidth="100">

            <j:Label multiline="true">
                <j:html><![CDATA[<p><strong>Default dropdown</strong> single value.</p>]]></j:html>
            </j:Label>
            <j:HGroup percentWidth="100" itemsHorizontalAlign="itemsSpaceAround">
                <vsel:VirtualSelectRoyale localId="myVSel1" percentWidth="45" dataProvider="{arStringBig}" onChange="onChangeVS(event)">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions position="bottom"/>
                    </vsel:configOption>
                </vsel:VirtualSelectRoyale>
                <vsel:VirtualSelectRoyale localId="myVSelH1" percentWidth="45" dataProvider="{arHClassBig}" onChange="onChangeVS(event)">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions position="bottom"/>
                    </vsel:configOption>
                </vsel:VirtualSelectRoyale>
            </j:HGroup>

            <j:Label multiline="true">
                <j:html><![CDATA[<p><strong>With search box</strong> Single value.</p>]]></j:html>
            </j:Label>
            <j:HGroup percentWidth="100" itemsHorizontalAlign="itemsSpaceAround">
                <vsel:VirtualSelectRoyale localId="myVSel2" percentWidth="45" dataProvider="{arClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions search="true"/>
                    </vsel:configOption>
                </vsel:VirtualSelectRoyale>
                <vsel:VirtualSelectRoyale localId="myVSelH2" percentWidth="45" dataProvider="{arHClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions search="true"/>
                    </vsel:configOption>
                </vsel:VirtualSelectRoyale>
            </j:HGroup>

            <j:Label multiline="true">
                <j:html><![CDATA[<p><strong>Multiple select</strong> With search box. (Maximum 4 items selected)</p>]]></j:html>
            </j:Label>
            <j:HGroup percentWidth="100" itemsHorizontalAlign="itemsSpaceAround">
                <vsel:VirtualMultiSelectRoyale localId="myVSel3" percentWidth="45" dataProvider="{arClassBig}" onChange="onChangeVS(event)">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions search="true" multiple="true" maxValues="4"/>
                    </vsel:configOption>
                </vsel:VirtualMultiSelectRoyale>
                <vsel:VirtualMultiSelectRoyale localId="myVSelH3" percentWidth="45" dataProvider="{arHClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions search="true" multiple="true" maxValues="4"/>
                    </vsel:configOption>
                </vsel:VirtualMultiSelectRoyale>
            </j:HGroup>
            
            <j:Label multiline="true">
                <j:html><![CDATA[<p><strong>Multiple select</strong> Without search box.</p>]]></j:html>
            </j:Label>
            <j:HGroup percentWidth="100" itemsHorizontalAlign="itemsSpaceAround">
                <vsel:VirtualMultiSelectRoyale localId="myVSel3_1" percentWidth="45" dataProvider="{arClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions search="false" multiple="true"/>
                    </vsel:configOption>
                </vsel:VirtualMultiSelectRoyale>
                <vsel:VirtualMultiSelectRoyale localId="myVSelH3_1" percentWidth="45" dataProvider="{arHClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions search="false" multiple="true"/>
                    </vsel:configOption>
                </vsel:VirtualMultiSelectRoyale>
            </j:HGroup>
            
            <j:HGroup percentWidth="100" gap="10">
            <j:Label multiline="true">
                <j:html><![CDATA[<p><strong>Disabled options</strong> (First 3 options disabled)</p>]]></j:html>
            </j:Label>
            <j:Button text="set disabled [3,4,5]" click="myVSel3_2.disabledOptions=[3,4,5];"/>
            </j:HGroup>
            <j:HGroup percentWidth="100" itemsHorizontalAlign="itemsSpaceAround">
                <vsel:VirtualMultiSelectRoyale localId="myVSel3_2" percentWidth="45" dataProvider="{arClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions search="false" multiple="true" disabledOptions="{[0,1,2]}"/>
                    </vsel:configOption>
                </vsel:VirtualMultiSelectRoyale>
                <vsel:VirtualMultiSelectRoyale localId="myVSelH3_2" percentWidth="45" dataProvider="{arHClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions search="false" multiple="true" disabledOptions="{[0,1,2]}"/>
                    </vsel:configOption>
                </vsel:VirtualMultiSelectRoyale>
            </j:HGroup>
            
            <j:Label multiline="true">
                <j:html><![CDATA[<p><strong>Keep dropbox always open</strong>  with fixed height</p>]]></j:html>
            </j:Label>
            <j:HGroup percentWidth="100" itemsHorizontalAlign="itemsSpaceAround">
                <vsel:VirtualSelectListRoyale localId="myVSel4" percentWidth="45" dataProvider="{arClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions  search="true" multiple="false" additionalClasses="vscomp-royale"/>
                    </vsel:configOption>
                </vsel:VirtualSelectListRoyale>
                
                <!--<vsel:VirtualMultiSelectRoyale localId="myVSelH4" percentWidth="45" dataProvider="{arHClassBig}"
                 search="false" multiple="true" keepAlwaysOpen="true"/> -->

                <jc:VirtualComboBoxJwExt localId="myVSelH4" percentWidth="45" 
                    itemRenderer="org.apache.royale.community.itemRenderers.LabelTruncateItemRenderer"
                    dataProvider="{dpClassBig}" labelField="label">
                    <jc:beads>
                        <j:SearchFilter/>
                    </jc:beads>
                </jc:VirtualComboBoxJwExt>
            </j:HGroup>
            
            <j:Label multiline="true">
                <j:html><![CDATA[<p><strong>Preselect value/s</strong> (Left, first 3 options selected - Right, 2 value selected)</p>]]></j:html>
            </j:Label>
            <j:HGroup percentWidth="100" itemsHorizontalAlign="itemsSpaceAround">
                <vsel:VirtualMultiSelectRoyale localId="myVSel5" percentWidth="45" dataProvider="{arClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions  search="false" multiple="true" selectedValue="{[0,1,2]}"/>
                    </vsel:configOption>
                </vsel:VirtualMultiSelectRoyale>
                <vsel:VirtualMultiSelectRoyale localId="myVSelH5" percentWidth="45" dataProvider="{arHClassBig}">
                    <vsel:configOption>
                        <vsel:virtualSelectOptions search="false" multiple="true" selectedValue="2"/>
                    </vsel:configOption>
                </vsel:VirtualMultiSelectRoyale>
            </j:HGroup>

        </j:VGroup>
        
    </j:CardPrimaryContent>
    
    <j:CardActions>
        <j:Label>
            <j:html><![CDATA[<p>Selected Value: <strong>{localSelectedValue}</strong></p>]]></j:html>
        </j:Label>
        <j:Label text=""/>
    </j:CardActions>
</j:Card>